{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "Points and Paths Data Format",
  "description": "Schema for representing 3D points, paths, and acoustic paths",
  "type": "object",
  "properties": {
    "points": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Point"
      }
    },
    "paths": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/Path"
      }
    },
    "acousticPaths": {
      "type": "array",
      "items": {
        "$ref": "#/definitions/AcousticPath"
      }
    }
  },
  "definitions": {
    "Point": {
      "type": "object",
      "required": ["x", "y", "z"],
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" },
        "size": {
          "type": "number",
          "minimum": 0,
          "default": 1.0
        },
        "name": {
          "type": ["string", "null"]
        }
      }
    },
    "Vector": {
      "type": "object",
      "required": ["x", "y", "z"],
      "properties": {
        "x": { "type": "number" },
        "y": { "type": "number" },
        "z": { "type": "number" }
      }
    },
    "Ray": {
      "type": "object",
      "required": ["origin", "direction"],
      "properties": {
        "origin": { "$ref": "#/definitions/Point" },
        "direction": { "$ref": "#/definitions/Vector" }
      }
    },
    "Shot": {
      "type": "object",
      "required": ["ray", "gain"],
      "properties": {
        "ray": { "$ref": "#/definitions/Ray" },
        "gain": { "type": "number" }
      }
    },
    "Path": {
      "type": "object",
      "required": ["points"],
      "properties": {
        "points": {
          "type": "array",
          "items": { "$ref": "#/definitions/Point" },
          "minItems": 1
        },
        "name": {
          "type": ["string", "null"]
        },
        "color": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#0000FF"
        },
        "thickness": {
          "type": "number",
          "minimum": 0,
          "default": 1.0
        }
      }
    },
    "NearestApproach": {
      "type": "object",
      "required": ["position", "distance"],
      "properties": {
        "position": { "$ref": "#/definitions/Point" },
        "distance": { "type": "number" }
      }
    },
    "AcousticPath": {
      "type": "object",
      "required": ["points", "shot", "gain", "distance", "nearestApproach"],
      "properties": {
        "points": {
          "type": "array",
          "items": { "$ref": "#/definitions/Point" },
          "minItems": 1
        },
        "shot": { "$ref": "#/definitions/Shot" },
        "gain": { "type": "number" },
        "distance": { "type": "number" },
        "nearestApproach": { "$ref": "#/definitions/NearestApproach" },
        "name": {
          "type": ["string", "null"]
        },
        "color": {
          "type": "string",
          "pattern": "^#[0-9A-Fa-f]{6}$",
          "default": "#FF0000"
        },
        "thickness": {
          "type": "number",
          "minimum": 0,
          "default": 1.0
        }
      }
    }
  }
}
